\documentclass[
  twoside,
]{article}

% listings package is used to print out source code with line numbers
\usepackage{listings}

% color package allows us to define colors for --color option
\usepackage[usenames,dvipsnames]{color}

% paratype package is provided by the OpenSUSE/fedora package texlive-paratype
\usepackage{paratype}

% Use monospace font for everything by default
\renewcommand{\familydefault}{\ttdefault}

% Define custom colors for highlighting, if using color printing
\definecolor{OliveGreen}{cmyk}{0.64,0,0.95,0.40}
\definecolor{gray}{rgb}{0.5, 0.5, 0.5}
\definecolor{black}{rgb}{0.0, 0.0, 0.0}

\begin{document}

\lstset{
language=\VAR{language},                % Code langugage
basicstyle=\ttfamily\scriptsize,        % Code font, inherited from paratype
numbers=left,                           % Line nums position
\BLOCK{ if color }
keywordstyle=\color{OliveGreen},        % Keywords font ('*' = uppercase)
commentstyle=\color{gray},              % Comments font
numberstyle=\tiny\color{gray},          % Line-numbers fonts
\BLOCK{ else }
keywordstyle=\color{black},             % Keywords font ('*' = uppercase)
commentstyle=\color{black},             % Comments font
numberstyle=\tiny\color{black},         % Line-numbers fonts
\BLOCK{ endif }
stepnumber=1,                           % Step between different line-numbers
firstnumber=1,                          % Set the first line number to 1
numberfirstline=true,                   % Number the first line
numbersep=5pt,                          % How far are line-numbers from code
backgroundcolor=\color{white},          % Choose background color
frame=none,                             % A frame around the code
tabsize=2,                              % Default tab size
captionpos=b,                           % Caption-position = bottom
breaklines=true,                        % Automatic line breaking?
breakatwhitespace=false,                % Automatic breaks only at whitespace?
showspaces=false,                       % Dont make spaces visible
showtabs=false,                         % Dont make tabls visible
morekeywords={__global__, __device__},  % CUDA specific keywords
}
\section*{\textit{\VAR{title}}}
\pagestyle{headings}
\markright{\VAR{title}}
\lstinputlisting{\VAR{filepath}}
\end{document}
